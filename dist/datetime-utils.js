"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const string_utils_1=__importDefault(require("./string-utils")),padding=(e,t="00")=>(t+String(e)).slice(-t.length),DatetimeUtils={isValidNumber:(e,t,a)=>{if(null==e||null==t||null==a)return!1;const n=new Date(Number(e),Number(t)-1,Number(a));return n.getFullYear()===Number(e)&&n.getMonth()+1===Number(t)&&n.getDate()===Number(a)},getDateByYMD:(e,t,a)=>new Date(Number(e),Number(t)-1,Number(a)),convertStringToDate:(e,t)=>{if(string_utils_1.default.isNullOrEmpty(e))return t;const a=new Date;if(e.indexOf("-")>0){const t=e.split("-");return 3!==t.length?a:DatetimeUtils.isValidNumber(t[0],t[1],t[2])?DatetimeUtils.getDateByYMD(t[0],t[1],t[2]):a}if(e.indexOf("/")>0){const t=e.split("/");return 3!==t.length?a:DatetimeUtils.isValidNumber(t[0],t[1],t[2])?DatetimeUtils.getDateByYMD(t[0],t[1],t[2]):a}if(8===e.length){const t=e.substring(0,4),n=e.substring(4,6),r=e.substring(6,8);return DatetimeUtils.isValidNumber(t,n,r)?DatetimeUtils.getDateByYMD(t,n,r):a}const n=e.indexOf("年"),r=e.indexOf("月"),i=e.indexOf("日");if(n>=0&&r>=0&&i>=0){const t=e.substring(0,n),l=e.substring(n+1,r),s=e.substr(r+1,i);return DatetimeUtils.isValidNumber(t,l,s)?DatetimeUtils.getDateByYMD(t,l,s):a}if(n>=0&&r>=0){const t=e.substring(0,n),i=e.substring(n+1,r);return DatetimeUtils.isValidNumber(t,i,1)?DatetimeUtils.getDateByYMD(t,i,1):a}return t},convertToDate:(e,t)=>null==e?t:"string"==typeof e||"number"==typeof e?DatetimeUtils.convertStringToDate(String(e),t):new Date(e),convertDateToString:(e,t="yyyy-MM-dd")=>{if(null==e||string_utils_1.default.isNullOrEmpty(t))return"";const a=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),l=e.getMinutes(),s=e.getSeconds();return t.replace("yyyy",String(a)).replace("yy","00"+String(a).slice(-2)).replace("MM",("0"+String(n)).slice(-2)).replace("M",String(n)).replace("dd",("0"+String(r)).slice(-2)).replace("d",String(r)).replace("hh",("0"+String(i)).slice(-2)).replace("h",String(i)).replace("mm",("0"+String(l)).slice(-2)).replace("m",String(l)).replace("ss",("0"+String(s)).slice(-2)).replace("s",String(s))},datetimeStr:()=>{const e=new Date;return padding(e.getFullYear(),"0000")+padding(e.getMonth()+1)+padding(e.getDate())+padding(e.getHours())+padding(e.getMinutes())},copy:e=>null==e?e:new Date(e),resetTime:e=>(null==e||(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e),getResetedTimeDate:()=>DatetimeUtils.resetTime(new Date),getDaysDiff:(e,t)=>{if(null==e||null==t)return 0;const a=Math.floor(e.getTime()/864e5);return Math.floor(t.getTime()/864e5)-a},getDays:(e,t)=>null==e&&null==t?0:Math.abs(DatetimeUtils.getDaysDiff(e,t))+1,getFirstDateAtMonth:(e=new Date)=>new Date(e.getFullYear(),e.getMonth(),1),getLastDateAtMonth:(e=new Date)=>new Date(e.getFullYear(),e.getMonth()+1,0),getFirstDateAtYear:(e=new Date)=>new Date(e.getFullYear(),0,1),getLastDateAtYear:(e=new Date)=>new Date(e.getFullYear(),11,31),validContext:(e,t)=>null==e||null==t||DatetimeUtils.getDaysDiff(e,t)>=0,addDay:(e=new Date,t)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+t),getPrevDate:(e=new Date)=>DatetimeUtils.addDay(e,-1),getNextDate:(e=new Date)=>DatetimeUtils.addDay(e,1),getPrevWeekDate:(e=new Date)=>DatetimeUtils.addDay(e,-7),getNextWeekDate:(e=new Date)=>DatetimeUtils.addDay(e,7),getPrevMonthDate:(e=new Date,t=!1)=>{const a=new Date(e.getFullYear(),e.getMonth()-1,e.getDate());return!0===t&&a.getDate()!==e.getDate()&&a.setDate(0),a},getNextMonthDate:(e=new Date,t=!1)=>{const a=new Date(e.getFullYear(),e.getMonth()+1,e.getDate());return!0===t&&a.getDate()!==e.getDate()&&a.setDate(0),a},getPrevYearDate:(e=new Date,t=!1)=>{const a=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());return!0===t&&a.getDate()!==e.getDate()&&a.setDate(0),a},getNextYearDate:(e=new Date,t=!1)=>{const a=new Date(e.getFullYear()+1,e.getMonth(),e.getDate());return!0===t&&a.getDate()!==e.getDate()&&a.setDate(0),a}};exports.default=DatetimeUtils;